<section class="bg-browse">
  <div class="row">
    <div class="col-md-1"></div>
    <div class="col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8">
      <h2 class="head">Technology</h2>
    </div>
    <div class="col-12 col-sm-12 col-md-3 col-lg-3 col-xl-3">
      <ul class="list-group mt-3">
        <li class="list-item" routerLink="../exam-home/exam" style="opacity: .7">Exams /</li>
        <li class="list-item " style="font-weight: bold;">Technology</li>
      </ul>
    </div>
  </div>
</section>
<div class="container-fluid">
  <div class="row">
    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 text-right">
      <button class="btn btn-primary mt-4" routerLink="/dashboard/exam-home/exam">Back</button>
    </div>
  </div>
</div>
<section class="create-bg">
  <div class="container-fluid">

    <div class="row mt-3">
      <div class="col-md-1"></div>
      <div class="col-12 col-sm-12 col-md-10 col-lg-10 col-xl-10 card">
        <section class="upload-bg">
          <div class="row">
            <div class="col-12 col-sm-12 col-md-12 col-lg-5 col-xl-5" style="border-right:1px solid #979797;">
              <form [formGroup]="technologyform">
                <div class="row">
                  <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                    <h2 class="bulk-head">Technology Name</h2>
                    <input class="form-control" type="text" formControlName="name" placeholder="Enter Name Here">
                    <small class="text-danger errormsg" *ngIf="
                    !technologyform.controls.name.valid &&
                    technologyform.controls.name.touched
                  ">Technology is required</small>
                  </div>
                </div>
                <div class="row mt-4">
                  <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                    <h2 class="bulk-head">Select Category</h2>
                    <div class="form-group">
                      <select class="form-control" id="sel1" formControlName="Categoryid" style="cursor: pointer">
                        <option value="null" disabled>--Select Category--</option>
                        <ng-container *ngFor="let data of allCategorys;  let index = index">
                          <option value={{data?._id}}>{{(data.name != null) ?data.name : '0' }}</option>
                        </ng-container>
                      </select>
                      <small class="text-danger errormsg" *ngIf="
                        !technologyform.controls.Categoryid.valid &&
                        technologyform.controls.Categoryid.touched
                      ">Category is required</small>
                    </div>
                  </div>
                </div>
                <div class="row mt-4">
                  <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                    <button class="btn btn-primary" (click)="addcategory()">Add Technology</button>
                  </div>
                </div>
              </form>
            </div>
            <div class="col-12 col-sm-12 col-md-12 col-lg-7 col-xl-7">
              <div class="row">
                <div class="col-lg-7"></div>
                <div class="col-12 col-sm 12 col-md-12 col-lg-4 col-xl-5">
                  <div class="input-group mt-3">
                    <h2 class="bulk-head" style="font-size: 19px;padding: 0px 21px 0px 0px;">Select Category</h2>
                    <div class="form-group">
                      <select class="form-control" id="sel2" style="background: #F4F6F8;width: 183px;cursor: pointer;"
                        (change)="gettechnology($event.target.value)">
                        <ng-container *ngFor="let data of allCategorys;  let index = index">
                          <option value={{data?._id}}>{{(data.name != null) ?data.name : '0' }}</option>
                        </ng-container>
                      </select>
                    </div>
                  </div>
                </div>
              </div>

             
                <div class="row mt-1">
                  <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                    <div class="table-bg">
                       
                      <table class="table">
                        <thead style="background: #F4F6F8;border-radius: 5px;">
                          <tr>
                            <th></th>
                            <th style="width: 27%" id="name" class="head">
                              Name
                            </th>
                            <th class="head" id="exam" style="text-align: center;width: 21%">
                              Exams
                            </th>
                            <!-- <th class="head" id="category">
                              Parent Category
                            </th> -->
                            <th></th>
                          </tr>
                        </thead>
                        <tbody>
                            <ng-container *ngIf="allTechnology.length>0">
                          <ng-container
                            *ngFor="let data of allTechnology | filter:filter |  paginate: { id: 'listing_pagination',itemsPerPage: 10, currentPage: page}; let i=index;">
                            <tr>
                              <td></td>
                              <td class="td-head">{{(data.name != null) ?data.name : '0' }}</td>
                              <td class="td-head" style="text-align: center">{{(data.examcount != null) ?
                                    data.examcount : '0' }}</td>
                              <!-- <td class="td-head" style="text-align: left">{{(data.parentcategory != null) ?
                                    data.parentcategory : '-' }}</td> -->
                              <td style="text-align: center;"><button class="btn btn-success edit"
                                  (click)="editcategory(data._id,((page- 1) * 10 + i))">Edit &nbsp;<img
                                    class="img-fluid" id="image" src="assets/images/edit.svg"></button></td>
                              <!-- <td><button class="btn btn-success edit" (click)="deletecategory(data._id)"><img
                                  class="img-fluid" id="image" src="assets/images/delete-trash-remove-256.png"></button>
                            </td> -->
                            </tr>
                          </ng-container>
                        </ng-container>
                        <tr style="border-top: 1px solid #fff;">
                          <td colspan="5">
                              <h2 *ngIf="allTechnology.length==0" style="margin-top:22%;text-align: center;">No data available</h2>
                          </td>
                      </tr>
                        </tbody>
                      
                      </table>
                    </div>
                  </div>
                </div>
                <div class="row mt-2">
                  <div class="col-md-12 text-right">
                    <div>
                      <pagination-controls id="listing_pagination" maxSize="10" directionLinks="true"
                        (pageChange)="page = $event"></pagination-controls>
                    </div>
                  </div>
                </div>
            </div>
          </div>
        </section>
      </div>
      <div class="col-md-1"></div>
    </div>
    <br><br>
  </div>
</section>
<div id="delete" class="modal fade" role="dialog">
  <div class="modal-dialog modal-sm">
    <!-- Modal content-->
    <div class="modal-content delete">
      <div class="modal-header">
        <h4 class="modal-title font-thin">Delete Technology</h4>
      </div>
      <div class="modal-body">
        Are you sure want to delete Technology ?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-danger" (click)="Confirmdeletecategory()">Delete</button>
      </div>
    </div>
  </div>
</div>

<div id="edit" class="modal fade" role="dialog">
  <div class="modal-dialog modal-sm">
    <!-- Modal content-->
    <div class="modal-content delete">
      <div class="modal-header">
        <h4 class="modal-title font-thin">Edit Technology</h4>
      </div>
      <div class="modal-body">
        <div [formGroup]="EditcreateCategory">
          <div class="form-group">
            <label for="title" class="label categoryName">Technology Name</label>
            <input type="text" class="form-control title" id="title" placeholder="Enter Name Here" name="title"
              formControlName="name">
            <small class="text-danger errormsg" *ngIf="
                  !EditcreateCategory.controls.name.valid &&
                  EditcreateCategory.controls.name.touched
                ">Category is required</small>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-danger" (click)="Confirmeditcategory()">Save</button>
      </div>
    </div>
  </div>
</div>